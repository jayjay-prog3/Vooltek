<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chromebook++ PS4</title>
<style>
    body {
        margin: 0;
        font-family: 'Arial', sans-serif;
        background: #121212;
        color: white;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
    }
    #profileSetup, #mainMenu {
        display: none;
        flex: 1;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }
    input, textarea {
        margin: 5px 0;
        padding: 8px;
        font-size: 16px;
        width: 200px;
    }
    button {
        margin-top: 10px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }
    #appTiles {
        display: flex;
        gap: 20px;
        margin-top: 40px;
    }
    .appTile {
        width: 120px;
        text-align: center;
        cursor: pointer;
    }
    .appTile img {
        width: 100%;
        border-radius: 10px;
        transition: transform 0.2s;
    }
    .appTile:hover img {
        transform: scale(1.1);
    }
    .appName {
        margin-top: 5px;
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    /* Modal for future app loading */
    #appModal {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.9);
        justify-content: center;
        align-items: center;
        z-index: 999;
        flex-direction: column;
    }
    #appModal iframe {
        width: 80%;
        height: 80%;
        border: none;
        border-radius: 10px;
    }
    #closeModal {
        margin-top: 10px;
        padding: 5px 15px;
        cursor: pointer;
    }
</style>
</head>
<body>

<div id="profileSetup">
    <h1>Set up your profile</h1>
    <p id="useridDisplay"></p>
    <input type="text" id="displayName" placeholder="Display Name" maxlength="15"><br>
    <textarea id="bio" placeholder="Bio" rows="3" maxlength="100"></textarea><br>
    <button id="saveProfile">Save Profile</button>
</div>

<div id="mainMenu">
    <h1>Welcome, <span id="userDisplayName"></span></h1>
    <p id="userBio"></p>
    <div id="appTiles">
        <div class="appTile" id="placeholderApp">
            <img src="https://via.placeholder.com/120x120.png?text=App" alt="Placeholder App">
            <div class="appName">Placeholder App</div>
        </div>
    </div>
</div>

<!-- Modal for future app loading -->
<div id="appModal">
    <iframe id="appFrame"></iframe>
    <button id="closeModal">Close App</button>
</div>

<script>
    // Get user ID from localStorage
    const userID = localStorage.getItem('currentUserID') || 'UnknownUser';
    document.getElementById('useridDisplay').textContent = `Your User ID: ${userID}`;

    // Load saved profile
    const profileKey = `profile_${userID}`;
    let profile = JSON.parse(localStorage.getItem(profileKey));

    const profileSetupDiv = document.getElementById('profileSetup');
    const mainMenuDiv = document.getElementById('mainMenu');

    if (!profile) {
        profileSetupDiv.style.display = 'flex';
    } else {
        mainMenuDiv.style.display = 'flex';
        document.getElementById('userDisplayName').textContent = profile.displayName;
        document.getElementById('userBio').textContent = profile.bio;
    }

    document.getElementById('saveProfile').addEventListener('click', () => {
        const displayName = document.getElementById('displayName').value || 'Player';
        const bio = document.getElementById('bio').value || '';
        profile = { displayName, bio };
        localStorage.setItem(profileKey, JSON.stringify(profile));

        profileSetupDiv.style.display = 'none';
        mainMenuDiv.style.display = 'flex';
        document.getElementById('userDisplayName').textContent = displayName;
        document.getElementById('userBio').textContent = bio;
    });

    // Placeholder app click opens modal (future GitHub raw app will load here)
    const modal = document.getElementById('appModal');
    const iframe = document.getElementById('appFrame');
    document.getElementById('placeholderApp').addEventListener('click', () => {
        modal.style.display = 'flex';
        // For now, just a placeholder page
        iframe.srcdoc = '<h1 style="color:white;text-align:center;">App will load here</h1>';
    });

    document.getElementById('closeModal').addEventListener('click', () => {
        iframe.src = '';
        modal.style.display = 'none';
    });
</script>

</body>
</html>
